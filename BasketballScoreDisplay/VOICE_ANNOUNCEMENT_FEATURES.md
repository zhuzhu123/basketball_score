# 语音播报功能与倒计时按钮说明

## 🎯 新增功能概述

基于 `WindowsTTS.java` 文件，为全屏篮球比分显示系统添加了完整的语音播报功能和倒计时控制按钮。

## 🔊 语音播报功能

### 1. 集成 WindowsTTS 引擎

系统使用 `WindowsTTS.java` 提供的 PowerShell 语音合成功能，确保在 Windows 系统上的稳定性和兼容性。

#### 核心播报方法
```java
// 异步语音播报（不阻塞主线程）
WindowsTTS.speakAsync(String text);

// 带音量、语速控制的播报
WindowsTTS.speakWithControl(String text, int volume, int rate);
```

### 2. 倒计时语音播报

#### 播报规则
- **15-7秒**：静默倒计时（黄色数字显示）
- **6-1秒**：播报数字（红色数字 + 语音播报）
- **0秒**：播报"进攻结束"（红色数字 + 语音播报）

#### 播报示例
```
6秒 → 播报："6"
5秒 → 播报："5"
4秒 → 播报："4"
3秒 → 播报："3"
2秒 → 播报："2"
1秒 → 播报："1"
0秒 → 播报："进攻结束"
```

### 3. 操作反馈语音播报

#### 倒计时控制播报
- **开始倒计时**：播报"开始倒计时，15秒"
- **暂停倒计时**：播报"倒计时已暂停"
- **继续倒计时**：播报"继续倒计时，X秒"
- **重置倒计时**：播报"倒计时已重置"

#### 得分操作播报
- **龙都F4得分**：播报"龙都F4得分，X分"
- **龙都F4减分**：播报"龙都F4减分，X分"
- **暴风队得分**：播报"暴风队得分，X分"
- **暴风队减分**：播报"暴风队减分，X分"
- **重置比分**：播报"比分已重置"

## 🎮 倒计时控制按钮

### 1. 按钮布局

在比分页面底部添加了完整的倒计时控制按钮组：

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│    湖人队                VS               勇士队            │
│      98                                    102              │
│                                                             │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  [开始倒计时] [暂停倒计时] [继续倒计时] [重置倒计时] | [龙都F4+1] [暴风队+1] [重置比分] │
└─────────────────────────────────────────────────────────────┘
```

### 2. 按钮功能说明

#### 倒计时控制按钮
| 按钮 | 颜色 | 功能 | 语音播报 |
|------|------|------|----------|
| **开始倒计时** | 🟢 绿色 | 从15秒开始倒计时 | "开始倒计时，15秒" |
| **暂停倒计时** | 🟠 橙色 | 暂停当前倒计时 | "倒计时已暂停" |
| **继续倒计时** | 🔵 蓝色 | 从暂停时间继续 | "继续倒计时，X秒" |
| **重置倒计时** | 🟣 紫色 | 重置为15秒 | "倒计时已重置" |

#### 得分控制按钮
| 按钮 | 颜色 | 功能 | 语音播报 |
|------|------|------|----------|
| **龙都F4+1** | 🔴 橙红色 | 龙都F4加1分 | "龙都F4得分，X分" |
| **暴风队+1** | 🔵 蓝色 | 暴风队加1分 | "暴风队得分，X分" |
| **重置比分** | ⚫ 灰色 | 重置所有比分 | "比分已重置" |

### 3. 按钮样式特点

#### 视觉设计
- **大字体**：16px 微软雅黑粗体
- **高对比度**：白色文字 + 彩色背景
- **悬停效果**：鼠标悬停时按钮变亮
- **手型光标**：鼠标悬停时显示手型

#### 颜色编码
- **绿色**：开始/启动操作
- **橙色**：暂停/警告操作
- **蓝色**：继续/信息操作
- **紫色**：重置/清除操作
- **红色/蓝色**：龙都F4/暴风队操作

## 🔧 技术实现

### 1. 语音播报集成

#### 异步播报
```java
// 使用异步播报避免阻塞UI线程
WindowsTTS.speakAsync("开始倒计时，15秒");
```

#### 错误处理
```java
try {
    WindowsTTS.speakAsync(text);
} catch (Exception e) {
    System.err.println("语音播报失败: " + e.getMessage());
}
```

### 2. 按钮事件处理

#### 事件绑定
```java
startCountdownButton.addActionListener(e -> startCountdown());
pauseCountdownButton.addActionListener(e -> pauseCountdown());
continueCountdownButton.addActionListener(e -> continueCountdown());
```

#### 状态管理
```java
private void startCountdown() {
    countdownTime = 15;
    isCountdownRunning = true;
    showCountdownPanel();
    countdownTimer.start();
    WindowsTTS.speakAsync("开始倒计时，15秒");
}
```

### 3. 界面布局优化

#### 分层设计
- **主比分区域**：使用 GridBagLayout 精确控制布局
- **控制按钮区域**：使用 FlowLayout 水平排列按钮
- **整体布局**：使用 BorderLayout 垂直分层

#### 响应式设计
- 按钮大小自适应内容
- 间距统一，视觉平衡
- 支持不同屏幕分辨率

## 🚀 使用方法

### 1. 启动系统
```bash
java -cp target/classes com.basketball.display.BasketballFullScreenDisplay
```

### 2. 倒计时操作流程

#### 标准倒计时流程
1. **点击"开始倒计时"** → 播报"开始倒计时，15秒"
2. **倒计时进行** → 6秒开始播报数字
3. **时间到0** → 播报"进攻结束"，2秒后返回比分页面

#### 暂停继续流程
1. **点击"暂停倒计时"** → 播报"倒计时已暂停"
2. **点击"继续倒计时"** → 播报"继续倒计时，X秒"
3. **从暂停时间继续倒计时**

### 3. 得分操作流程

#### 加分操作
1. **点击"龙都F4+1"** → 播报"龙都F4得分，X分"
2. **点击"暴风队+1"** → 播报"暴风队得分，X分"

#### 重置操作
1. **点击"重置比分"** → 播报"比分已重置"
2. **点击"重置倒计时"** → 播报"倒计时已重置"

## 🎵 语音播报配置

### 1. 系统要求
- **操作系统**：Windows 10/11
- **语音引擎**：Windows 内置语音合成
- **权限**：允许程序执行 PowerShell 命令

### 2. 语音参数
- **音量**：默认100%（最大音量）
- **语速**：默认0（正常语速）
- **语言**：系统默认语言（中文/英文）

### 3. 自定义配置
```java
// 可以调用带参数的播报方法
WindowsTTS.speakWithControl("重要提示", 100, 2); // 音量100%，语速+2
```

## ✅ 功能验证

### 1. 编译测试
```bash
mvn clean compile
# 结果：BUILD SUCCESS
```

### 2. 功能测试
- ✅ 语音播报功能正常
- ✅ 倒计时按钮响应正常
- ✅ 界面布局显示正常
- ✅ 蓝牙连接功能正常

## 🎉 功能总结

通过集成 `WindowsTTS.java` 和添加倒计时控制按钮，系统现在具备：

1. **完整的语音播报**：倒计时、得分、操作反馈
2. **直观的控制界面**：彩色按钮，功能明确
3. **专业的用户体验**：语音提示，操作反馈
4. **灵活的倒计时控制**：开始、暂停、继续、重置

这些功能让篮球比赛计分系统更加专业和易用，适合现场比赛使用！ 